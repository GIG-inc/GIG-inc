syntax="proto3";

// i must add this so that the generated file will have a prefix  this to allow for calling
 package protoservice;

// here we should describe the request from the api_gateway
message create_user_req{
    string globaluserid =1;
    string phonenumber= 2;
    string kycstatus=3;
    string kyclevel=4;
    string acceptterms=5;
    int64 transactionlimit=6;
    string username=7;
    create_wallet wallet=8;
}
message create_wallet{
    string cashbalance=1;
    string goldbalance=2;
}
message create_user_resp{
    string status=1;
    optional string message=2;
    optional changeseterrors errors=3;
}

message validationerror{
    string field=1;
    string message=2;
}
message changeseterrors{
    repeated validationerror errors=1;
}

message user_account_data_req{
    string id =1;
}
message transfer_req{
    string from_id =1;
    string to_id=2;
    amounts gold_amount=3;
    amounts cash_amount=4;
}
message sale_req{
    string from_id =1;
    string to_id=2;
    amounts gold_amount=3;
    amounts cash_amount=4;
}
message opening_req{
}
message history_req{
}

/*
request i am thinking should be values like get_account_amount(account_details)
request transfering amount from one person's wallet to another(transfer)
if they want to see any opening they can (openings)
if they are looking for someone selling gold (sale)
market
history

*/
message user_data_resp{
    amounts gold_amount=1;
    amounts cash_amount=2;
}

message sale_resp{
    string id = 1;
    string from = 2;
    string to = 3;
    amounts goldamount = 4;
    amounts moneyamount = 5;
    bool success = 6;
    optional string reason=7;
}
// for gold every
message transfer_resp{
    string transer_id=1;
    string from=2;
    string to=3;
    amounts gold_amount=4;
    amounts money_amount=5;
    bool success = 6;
    optional string reason=7;
}

// opening
message opening_resp{
    amounts amount=1;
    string closing_date=2;
}
message history_resp{
    repeated history request=1;
}
message history{
    string opening_date=1;
    string closing_date=2;
    amounts initial_inv=3;
    amounts revenue=4;
    int64 people_inv=5;
    amounts profit_per_shilling=6;
}

message amounts{
    int64 amount =1;
}
service gigservice{
    rpc account_details(user_account_data_req) returns (user_data_resp);
    rpc transfer(stream transfer_req)returns (stream transfer_resp);
    rpc sale (sale_req) returns(sale_resp);
    rpc history(history_req) returns (history_resp);
    rpc opening(history_req) returns (history_resp);
    rpc createaccount(stream create_user_req) returns (stream create_user_resp);
}